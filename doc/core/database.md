# 数据库相关技术

- ### 数据库选择
  - 采用couchbase server, couchbase lite以及sync gatewate

- ### 同步相关问题
  - **数据部分同步:** 不是所有的用户都需要同步所有的数据，他们只需要同步他所需要的数据。此处可采用**channel**技术，所有的document都属于一个或多个channel，用户可选择同步一个或者多个channel，可用userId来作为channel的标识符。
  - **处理冲突思路:**
    - 用户删除通知：假删除，从该通知的channel中移除用户的channel。会产生冲突，多个用户删除，处理思路是只保留相同的channel。
    - 封禁通知：会产生冲突，处理思路是封禁状态标识只要有true就为ture。
    - 被通知者回执：①全部交由通知者来处理，不会产生冲突。②被通知者自行添加，会产生冲突，处理思路是只增不减。
